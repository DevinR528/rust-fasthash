<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="rustdoc">
    <meta name="description" content="API documentation for the Rust `spooky` mod in crate `fasthash`.">
    <meta name="keywords" content="rust, rustlang, rust-lang, spooky">

    <title>fasthash::spooky - Rust</title>

    <link rel="stylesheet" type="text/css" href="../../rustdoc.css">
    <link rel="stylesheet" type="text/css" href="../../main.css">
    

    
    
</head>
<body class="rustdoc">
    <!--[if lte IE 8]>
    <div class="warning">
        This old browser is unsupported and will most likely display funky
        things.
    </div>
    <![endif]-->

    

    <nav class="sidebar">
        
        <p class='location'><a href='../index.html'>fasthash</a></p><script>window.sidebarCurrent = {name: 'spooky', ty: 'mod', relpath: '../'};</script><script defer src="../sidebar-items.js"></script>
    </nav>

    <nav class="sub">
        <form class="search-form js-only">
            <div class="search-container">
                <input class="search-input" name="search"
                       autocomplete="off"
                       placeholder="Click or press ‘S’ to search, ‘?’ for more options…"
                       type="search">
            </div>
        </form>
    </nav>

    <section id='main' class="content mod">
<h1 class='fqn'><span class='in-band'>Module <a href='../index.html'>fasthash</a>::<wbr><a class='mod' href=''>spooky</a></span><span class='out-of-band'><span id='render-detail'>
                   <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">
                       [<span class='inner'>&#x2212;</span>]
                   </a>
               </span><a id='src-1399' class='srclink' href='../../src/fasthash/src/spooky.rs.html#1-357' title='goto source code'>[src]</a></span></h1>
<div class='docblock'><p>SpookyHash: a 128-bit noncryptographic hash function</p>

<p>by Bob Jenkins</p>

<p><a href="http://www.burtleburtle.net/bob/hash/spooky.html">http://www.burtleburtle.net/bob/hash/spooky.html</a></p>

<ul>
<li>Oct 31 2010: alpha, framework + SpookyHash::Mix appears right</li>
<li>Oct 31 2011: alpha again, Mix only good to 2<sup><sup>69</sup></sup> but rest appears right</li>
<li>Dec 31 2011: beta, improved Mix, tested it for 2-bit deltas</li>
<li>Feb  2 2012: production, same bits as beta</li>
<li>Feb  5 2012: adjusted definitions of uint* to be more portable</li>
</ul>

<p>Up to 4 bytes/cycle for long messages.  Reasonably fast for short messages.
All 1 or 2 bit deltas achieve avalanche within 1% bias per output bit.</p>

<p>This was developed for and tested on 64-bit x86-compatible processors.
It assumes the processor is little-endian.  There is a macro
controlling whether unaligned reads are allowed (by default they are).
This should be an equally good hash on big-endian machines, but it will
compute different results on them than on little-endian machines.</p>

<p>Google&#39;s CityHash has similar specs to SpookyHash, and CityHash is faster
on some platforms.  MD4 and MD5 also have similar specs, but they are orders
of magnitude slower.  CRCs are two or more times slower, but unlike
SpookyHash, they have nice math for combining the CRCs of pieces to form
the CRCs of wholes.  There are also cryptographic hashes, but those are even
slower than MD5.</p>

<h1 id='examples' class='section-header'><a href='#examples'>Examples</a></h1>
<pre class='rust rust-example-rendered'>
<span class='kw'>use</span> <span class='ident'>std</span>::<span class='ident'>hash</span>::{<span class='ident'>Hash</span>, <span class='ident'>Hasher</span>};

<span class='kw'>use</span> <span class='ident'>fasthash</span>::{<span class='ident'>spooky</span>, <span class='ident'>SpookyHasher</span>};

<span class='kw'>fn</span> <span class='ident'>hash</span><span class='op'>&lt;</span><span class='ident'>T</span>: <span class='ident'>Hash</span><span class='op'>&gt;</span>(<span class='ident'>t</span>: <span class='kw-2'>&amp;</span><span class='ident'>T</span>) <span class='op'>-&gt;</span> <span class='ident'>u64</span> {
    <span class='kw'>let</span> <span class='kw-2'>mut</span> <span class='ident'>s</span> <span class='op'>=</span> <span class='ident'>SpookyHasher</span>::<span class='ident'>new</span>();
    <span class='ident'>t</span>.<span class='ident'>hash</span>(<span class='kw-2'>&amp;</span><span class='kw-2'>mut</span> <span class='ident'>s</span>);
    <span class='ident'>s</span>.<span class='ident'>finish</span>()
}

<span class='kw'>let</span> <span class='ident'>h</span> <span class='op'>=</span> <span class='ident'>spooky</span>::<span class='ident'>hash64</span>(<span class='string'>b&quot;hello world\xff&quot;</span>);

<span class='macro'>assert_eq</span><span class='macro'>!</span>(<span class='ident'>h</span>, <span class='ident'>hash</span>(<span class='kw-2'>&amp;</span><span class='string'>&quot;hello world&quot;</span>));<a class='test-arrow' target='_blank' href=''>Run</a></pre>
</div><h2 id='structs' class='section-header'><a href="#structs">Structs</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.SpookyHash128.html'
                                  title='fasthash::spooky::SpookyHash128'>SpookyHash128</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 128-bit hash functions</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.SpookyHash32.html'
                                  title='fasthash::spooky::SpookyHash32'>SpookyHash32</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 32-bit hash functions</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.SpookyHash64.html'
                                  title='fasthash::spooky::SpookyHash64'>SpookyHash64</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 64-bit hash functions</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.SpookyHasher128.html'
                                  title='fasthash::spooky::SpookyHasher128'>SpookyHasher128</a></td>
                           <td class='docblock-short'>
                                <p>An implementation of <code>std::hash::Hasher</code> and <code>fasthash::HasherExt</code>.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='struct' href='struct.SpookyHasher64.html'
                                  title='fasthash::spooky::SpookyHasher64'>SpookyHasher64</a></td>
                           <td class='docblock-short'>
                                <p>An implementation of <code>std::hash::Hasher</code>.</p>
                           </td>
                       </tr></table><h2 id='functions' class='section-header'><a href="#functions">Functions</a></h2>
<table>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash128.html'
                                  title='fasthash::spooky::hash128'>hash128</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 128-bit hash functions for a byte array.
For convenience, a 128-bit seed is also hashed into the result.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash128_with_seed.html'
                                  title='fasthash::spooky::hash128_with_seed'>hash128_with_seed</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 128-bit hash functions for a byte array.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash32.html'
                                  title='fasthash::spooky::hash32'>hash32</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 32-bit hash functions for a byte array.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash32_with_seed.html'
                                  title='fasthash::spooky::hash32_with_seed'>hash32_with_seed</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 32-bit hash functions for a byte array.
For convenience, a 32-bit seed is also hashed into the result.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash64.html'
                                  title='fasthash::spooky::hash64'>hash64</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 64-bit hash functions for a byte array.
For convenience, a 64-bit seed is also hashed into the result.</p>
                           </td>
                       </tr>
                       <tr class=' module-item'>
                           <td><a class='fn' href='fn.hash64_with_seed.html'
                                  title='fasthash::spooky::hash64_with_seed'>hash64_with_seed</a></td>
                           <td class='docblock-short'>
                                <p>SpookyHash 64-bit hash functions for a byte array.</p>
                           </td>
                       </tr></table></section>
    <section id='search' class="content hidden"></section>

    <section class="footer"></section>

    <aside id="help" class="hidden">
        <div>
            <h1 class="hidden">Help</h1>

            <div class="shortcuts">
                <h2>Keyboard Shortcuts</h2>

                <dl>
                    <dt>?</dt>
                    <dd>Show this help dialog</dd>
                    <dt>S</dt>
                    <dd>Focus the search field</dd>
                    <dt>&larrb;</dt>
                    <dd>Move up in search results</dd>
                    <dt>&rarrb;</dt>
                    <dd>Move down in search results</dd>
                    <dt>&#9166;</dt>
                    <dd>Go to active search result</dd>
                    <dt>+</dt>
                    <dd>Collapse/expand all sections</dd>
                </dl>
            </div>

            <div class="infos">
                <h2>Search Tricks</h2>

                <p>
                    Prefix searches with a type followed by a colon (e.g.
                    <code>fn:</code>) to restrict the search to a given type.
                </p>

                <p>
                    Accepted types are: <code>fn</code>, <code>mod</code>,
                    <code>struct</code>, <code>enum</code>,
                    <code>trait</code>, <code>type</code>, <code>macro</code>,
                    and <code>const</code>.
                </p>

                <p>
                    Search functions by type signature (e.g.
                    <code>vec -> usize</code> or <code>* -> vec</code>)
                </p>
            </div>
        </div>
    </aside>

    

    <script>
        window.rootPath = "../../";
        window.currentCrate = "fasthash";
        window.playgroundUrl = "";
    </script>
    <script src="../../jquery.js"></script>
    <script src="../../main.js"></script>
    
    <script defer src="../../search-index.js"></script>
</body>
</html>